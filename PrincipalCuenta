import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class PrincipalCuenta {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        List<Cuenta> listaCuentas = new ArrayList<>();
        Cuenta cuentaActual = null;
        int opcion;
        
        System.out.println("======================================");
        System.out.println("   Despliege de menú de Cuentas");
        System.out.println("======================================");

        do {
            System.out.println("\nMenú principal");
            System.out.println("1) Crear Cuenta");
            System.out.println("2) Conocer la cantidad de Cuentas Creadas");
            System.out.println("3) Listar Cuentas");
            System.out.println("4) Seleccionar Cuenta actual");
            System.out.println("5) Depositar");
            System.out.println("6) Retirar");
            System.out.println("7) Consultar Saldo");
            System.out.println("8) Consultar Estado (toString)");
            System.out.println("0) Salir");
            System.out.print("Seleccione una opción: ");
            opcion = sc.nextInt();
            sc.nextLine(); 

            switch (opcion) {
                case 1: // Crear Cuenta
                    System.out.println("Ingrese saldo inicial:");
                    double saldo = sc.nextDouble();
                    sc.nextLine();

                    System.out.println("Desea asignar nombre a la cuenta? (S/N)");
                    String respuesta = sc.nextLine();

                    Cuenta nuevaCuenta;
                    if (respuesta.equalsIgnoreCase("S")) {
                        System.out.println("Ingrese el nombre del CuentaHabiente:");
                        String nombre = sc.nextLine();
                        nuevaCuenta = new Cuenta(nombre, saldo);
                    } else {
                        nuevaCuenta = new Cuenta(saldo);
                        System.out.println("Nombre por defecto asignado: " + nuevaCuenta.getCodCuenta());
                    }

                    listaCuentas.add(nuevaCuenta);
                    System.out.println("Cuenta creada con éxito.");
                    break;

                case 2: // Cantidad de cuentas
                    System.out.println("Cantidad de cuentas creadas: " + listaCuentas.size());
                    break;

                case 3: // Listar cuentas
                    if (listaCuentas.isEmpty()) {
                        System.out.println("No hay cuentas registradas.");
                    } else {
                        for (int i = 0; i < listaCuentas.size(); i++) {
                            System.out.println((i + 1) + ") " + listaCuentas.get(i).getCodCuenta());
                        }
                    }
                    break;

                case 4: // Seleccionar cuenta
                    if (listaCuentas.isEmpty()) {
                        System.out.println("No hay cuentas disponibles.");
                        break;
                    }
                    System.out.println("Seleccione el número de cuenta:");
                    for (int i = 0; i < listaCuentas.size(); i++) {
                        System.out.println((i + 1) + ") " + listaCuentas.get(i).getCodCuenta());
                    }
                    int seleccion = sc.nextInt();
                    sc.nextLine();
                    if (seleccion > 0 && seleccion <= listaCuentas.size()) {
                        cuentaActual = listaCuentas.get(seleccion - 1);
                        System.out.println("Cuenta seleccionada: " + cuentaActual.getCodCuenta());
                    } else {
                        System.out.println("Selección inválida.");
                    }
                    break;

                case 5: // Depositar
                    if (cuentaActual != null) {
                        System.out.println("Ingrese monto a depositar:");
                        double montoDep = sc.nextDouble();
                        sc.nextLine(); // Limpiar buffer
                        double saldoPostDep = cuentaActual.depositar(montoDep);
                        System.out.println("Saldo después del depósito: " + saldoPostDep);
                    } else {
                        System.out.println("No ha seleccionado ninguna cuenta.");
                    }
                    break;

                case 6: // Retirar
                    if (cuentaActual != null) {
                        System.out.println("Ingrese monto a retirar:");
                        double montoRet = sc.nextDouble();
                        sc.nextLine(); 
                        double saldoPostRet = cuentaActual.retirar(montoRet);
                        System.out.println("Saldo después del retiro: " + saldoPostRet);
                    } else {
                        System.out.println("No ha seleccionado ninguna cuenta.");
                    }
                    break;

                case 7: // Consultar saldo
                    if (cuentaActual != null) {
                        System.out.println("Saldo actual: " + cuentaActual.depositar(0)); // Retorna saldo actual
                    } else {
                        System.out.println("No ha seleccionado ninguna cuenta.");
                    }
                    break;

                case 8: // Consultar estado completo
                    if (cuentaActual != null) {
                        System.out.println(cuentaActual.toString());
                    } else {
                        System.out.println("No ha seleccionado ninguna cuenta.");
                    }
                    break;

                case 0: // Salir
                    System.out.println("Saliendo del programa...");
                    break;

                default:
                    System.out.println("Opción inválida.");
            }

        } while (opcion != 0);

        sc.close();
    }
}
